(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var r;if(typeof window!=="undefined"){r=window}else if(typeof global!=="undefined"){r=global}else if(typeof self!=="undefined"){r=self}else{r=this}r.mgrs=e()}})(function(){var e,r,a;return function t(e,r,a){function n(o,f){if(!r[o]){if(!e[o]){var s=typeof require=="function"&&require;if(!f&&s)return s(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var v=r[o]={exports:{}};e[o][0].call(v.exports,function(r){var a=e[o][1][r];return n(a?a:r)},v,v.exports,t,e,r,a)}return r[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<a.length;o++)n(a[o]);return n}({mgrs:[function(e,r,a){var t=6;var n="AJSAJS";var i="AFAFAF";var o=65;var f=73;var s=79;var l=86;var v=90;a.forward=function(e,r){r=r||5;return b(c({lat:e[1],lon:e[0]}),r)};a.inverse=function(e){var r=M(w(e.toUpperCase()));if(r.lat&&r.lon){return[r.lon,r.lat,r.lon,r.lat]}return[r.left,r.bottom,r.right,r.top]};a.toPoint=function(e){var r=M(w(e.toUpperCase()));if(r.lat&&r.lon){return[r.lon,r.lat]}return[(r.left+r.right)/2,(r.top+r.bottom)/2]};function h(e){return e*(Math.PI/180)}function u(e){return 180*(e/Math.PI)}function c(e){var r=e.lat;var a=e.lon;var t=6378137;var n=.00669438;var i=.9996;var o;var f;var s,l,v,u,c;var M=h(r);var b=h(a);var g;var m;m=Math.floor((a+180)/6)+1;if(a===180){m=60}if(r>=56&&r<64&&a>=3&&a<12){m=32}if(r>=72&&r<84){if(a>=0&&a<9){m=31}else if(a>=9&&a<21){m=33}else if(a>=21&&a<33){m=35}else if(a>=33&&a<42){m=37}}o=(m-1)*6-180+3;g=h(o);f=n/(1-n);s=t/Math.sqrt(1-n*Math.sin(M)*Math.sin(M));l=Math.tan(M)*Math.tan(M);v=f*Math.cos(M)*Math.cos(M);u=Math.cos(M)*(b-g);c=t*((1-n/4-3*n*n/64-5*n*n*n/256)*M-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*M)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*M)-35*n*n*n/3072*Math.sin(6*M));var p=i*s*(u+(1-l+v)*u*u*u/6+(5-18*l+l*l+72*v-58*f)*u*u*u*u*u/120)+5e5;var w=i*(c+s*Math.tan(M)*(u*u/2+(5-l+9*v+4*v*v)*u*u*u*u/24+(61-58*l+l*l+600*v-330*f)*u*u*u*u*u*u/720));if(r<0){w+=1e7}return{northing:Math.round(w),easting:Math.round(p),zoneNumber:m,zoneLetter:d(r)}}function M(e){var r=e.northing;var a=e.easting;var t=e.zoneLetter;var n=e.zoneNumber;if(n<0||n>60){return null}var i=.9996;var o=6378137;var f=.00669438;var s;var l=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f));var v,h,c,d,b,g;var m;var p,w;var k=a-5e5;var A=r;if(t<"N"){A-=1e7}m=(n-1)*6-180+3;s=f/(1-f);g=A/i;p=g/(o*(1-f/4-3*f*f/64-5*f*f*f/256));w=p+(3*l/2-27*l*l*l/32)*Math.sin(2*p)+(21*l*l/16-55*l*l*l*l/32)*Math.sin(4*p)+151*l*l*l/96*Math.sin(6*p);v=o/Math.sqrt(1-f*Math.sin(w)*Math.sin(w));h=Math.tan(w)*Math.tan(w);c=s*Math.cos(w)*Math.cos(w);d=o*(1-f)/Math.pow(1-f*Math.sin(w)*Math.sin(w),1.5);b=k/(v*i);var z=w-v*Math.tan(w)/d*(b*b/2-(5+3*h+10*c-4*c*c-9*s)*b*b*b*b/24+(61+90*h+298*c+45*h*h-252*s-3*c*c)*b*b*b*b*b*b/720);z=u(z);var C=(b-(1+2*h+c)*b*b*b/6+(5-2*c+28*h-3*c*c+8*s+24*h*h)*b*b*b*b*b/120)/Math.cos(w);C=m+u(C);var N;if(e.accuracy){var y=M({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});N={top:y.lat,right:y.lon,bottom:z,left:C}}else{N={lat:z,lon:C}}return N}function d(e){var r="Z";if(84>=e&&e>=72){r="X"}else if(72>e&&e>=64){r="W"}else if(64>e&&e>=56){r="V"}else if(56>e&&e>=48){r="U"}else if(48>e&&e>=40){r="T"}else if(40>e&&e>=32){r="S"}else if(32>e&&e>=24){r="R"}else if(24>e&&e>=16){r="Q"}else if(16>e&&e>=8){r="P"}else if(8>e&&e>=0){r="N"}else if(0>e&&e>=-8){r="M"}else if(-8>e&&e>=-16){r="L"}else if(-16>e&&e>=-24){r="K"}else if(-24>e&&e>=-32){r="J"}else if(-32>e&&e>=-40){r="H"}else if(-40>e&&e>=-48){r="G"}else if(-48>e&&e>=-56){r="F"}else if(-56>e&&e>=-64){r="E"}else if(-64>e&&e>=-72){r="D"}else if(-72>e&&e>=-80){r="C"}return r}function b(e,r){var a="00000"+e.easting,t="00000"+e.northing;return e.zoneNumber+e.zoneLetter+g(e.easting,e.northing,e.zoneNumber)+a.substr(a.length-5,r)+t.substr(t.length-5,r)}function g(e,r,a){var t=m(a);var n=Math.floor(e/1e5);var i=Math.floor(r/1e5)%20;return p(n,i,t)}function m(e){var r=e%t;if(r===0){r=t}return r}function p(e,r,a){var t=a-1;var h=n.charCodeAt(t);var u=i.charCodeAt(t);var c=h+e-1;var M=u+r;var d=false;if(c>v){c=c-v+o-1;d=true}if(c===f||h<f&&c>f||(c>f||h<f)&&d){c++}if(c===s||h<s&&c>s||(c>s||h<s)&&d){c++;if(c===f){c++}}if(c>v){c=c-v+o-1}if(M>l){M=M-l+o-1;d=true}else{d=false}if(M===f||u<f&&M>f||(M>f||u<f)&&d){M++}if(M===s||u<s&&M>s||(M>s||u<s)&&d){M++;if(M===f){M++}}if(M>l){M=M-l+o-1}var b=String.fromCharCode(c)+String.fromCharCode(M);return b}function w(e){if(e&&e.length===0){throw"MGRSPoint coverting from nothing"}var r=e.length;var a=null;var t="";var n;var i=0;while(!/[A-Z]/.test(n=e.charAt(i))){if(i>=2){throw"MGRSPoint bad conversion from: "+e}t+=n;i++}var o=parseInt(t,10);if(i===0||i+3>r){throw"MGRSPoint bad conversion from: "+e}var f=e.charAt(i++);if(f<="A"||f==="B"||f==="Y"||f>="Z"||f==="I"||f==="O"){throw"MGRSPoint zone letter "+f+" not handled: "+e}a=e.substring(i,i+=2);var s=m(o);var l=k(a.charAt(0),s);var v=A(a.charAt(1),s);while(v<z(f)){v+=2e6}var h=r-i;if(h%2!==0){throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e}var u=h/2;var c=0;var M=0;var d,b,g,p,w;if(u>0){d=1e5/Math.pow(10,u);b=e.substring(i,i+u);c=parseFloat(b)*d;g=e.substring(i+u);M=parseFloat(g)*d}p=c+l;w=M+v;return{easting:p,northing:w,zoneLetter:f,zoneNumber:o,accuracy:d}}function k(e,r){var a=n.charCodeAt(r-1);var t=1e5;var i=false;while(a!==e.charCodeAt(0)){a++;if(a===f){a++}if(a===s){a++}if(a>v){if(i){throw"Bad character: "+e}a=o;i=true}t+=1e5}return t}function A(e,r){if(e>"V"){throw"MGRSPoint given invalid Northing "+e}var a=i.charCodeAt(r-1);var t=0;var n=false;while(a!==e.charCodeAt(0)){a++;if(a===f){a++}if(a===s){a++}if(a>l){if(n){throw"Bad character: "+e}a=o;n=true}t+=1e5}return t}function z(e){var r;switch(e){case"C":r=11e5;break;case"D":r=2e6;break;case"E":r=28e5;break;case"F":r=37e5;break;case"G":r=46e5;break;case"H":r=55e5;break;case"J":r=64e5;break;case"K":r=73e5;break;case"L":r=82e5;break;case"M":r=91e5;break;case"N":r=0;break;case"P":r=8e5;break;case"Q":r=17e5;break;case"R":r=26e5;break;case"S":r=35e5;break;case"T":r=44e5;break;case"U":r=53e5;break;case"V":r=62e5;break;case"W":r=7e6;break;case"X":r=79e5;break;default:r=-1}if(r>=0){return r}else{throw"Invalid zone letter: "+e}}},{}]},{},[])("mgrs")});
var mgrs = module.exports;
